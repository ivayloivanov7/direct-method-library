# Copilot Instructions for Direct Method Library

## Project Overview
This is a demo project that will present an multi platform library structure, showcasing best practices for organizing code, tests, and documentation across different programming languages and environments. It will be implemented as a monorepo containing separate packages for each language/platform, with shared resources and consistent conventions.
The library will include implementations in languages such as Python, TypeScript (node.js), and C#(.NET), demonstrating how to structure a multi-language project effectively.
The logic will be simpler than in a real-world scenario, focusing on clarity and maintainability to illustrate best practices in multi-language project organization.
The library will use MQTT client for corresponding language/platform (Paho MQTT for Python, MQTT.js for Node.js, and MQTTnet for .NET). A simple class should be created in each language to demonstrate connecting to an MQTT broker, publishing a message, and subscribing to a topic. The class will receive mqtt broker address, topic and should subscribe and publish to the same topic.
The main purpose is to use github actions for CI/CD, testing, and release automation. The releases should be published to corresponding package managers (PyPI for Python, npm for Node.js, NuGet for .NET).

## Technology Stack
- **Primary Languages**: Python 3.9+, TypeScript/Node.js 18+, C# .NET 6+
- **MQTT Libraries**: 
  - Python: `paho-mqtt`
  - Node.js: `mqtt`
  - .NET: `MQTTnet`
- **Build Systems**: 
  - Python: `setuptools` with `pyproject.toml`
  - Node.js: `npm` with TypeScript compiler
  - .NET: MSBuild with `.csproj`
- **Testing Frameworks**: Not required for this demo project
- **CI/CD**: GitHub Actions

## Core Requirements

### MQTT Client Class Specifications
Each language implementation should include a class with:

**Class Name**: `DirectMethodMqttClient`

**Constructor Parameters**:
- `broker_host` (string): MQTT broker hostname/IP
- `broker_port` (int): MQTT broker port (default: 1883)
- `topic` (string): Topic to subscribe and publish to
- `client_id` (string, optional): Unique client identifier

**Methods**:
- `connect()`: Connect to MQTT broker
- `disconnect()`: Disconnect from MQTT broker
- `publish(message: string)`: Publish message to the configured topic
- `subscribe()`: Subscribe to the configured topic
- `on_message_received(callback)`: Set callback for received messages

**Example Usage**:
```python
# Python example
client = DirectMethodMqttClient("localhost", 1883, "test/topic")
client.connect()
client.subscribe()
client.publish("Hello World")
```

### Package Information
**Package Names**:
- Python: `direct-method-mqtt-python`
- Node.js: `@direct-method/mqtt-client`
- .NET: `DirectMethod.Mqtt.Client`

**Version Strategy**: Semantic versioning (semver) with synchronized versions across all packages

## File Structure Guidelines

```
/ (root)
├── README.md                   # Main project README
├── LICENSE                     # Project license
├── .gitignore                  # Git ignore rules
├── package.json                # Root package manager configuration (for workspace)
├── pyproject.toml              # Root Python configuration
├── global-changelog/           # Centralized changelog
│   └── CHANGELOG.md
├── tools/                      # Utility scripts
│   ├── version-sync.py         # Version synchronization script
│   └── release-notes.py        # Release notes generator
├── docs/                       # Shared documentation
│   ├── api/                    # API documentation
│   └── examples/               # Usage examples
├── packages/
│   ├── sdk-node/
│   │   ├── package.json        # Node.js package configuration
│   │   ├── tsconfig.json       # TypeScript configuration
│   │   ├── src/
│   │   │   ├── index.ts        # Main export file
│   │   │   └── DirectMethodMqttClient.ts
│   │   └── README.md
│   ├── sdk-dotnet/
│   │   ├── DirectMethod.Mqtt.Client.sln  # .NET solution
│   │   ├── src/
│   │   │   └── DirectMethod.Mqtt.Client/
│   │   │       ├── DirectMethod.Mqtt.Client.csproj
│   │   │       └── DirectMethodMqttClient.cs
│   │   └── README.md
│   └── sdk-python/
│       ├── pyproject.toml      # Python package configuration
│       ├── setup.cfg           # Additional Python setup configuration
│       ├── src/
│       │   └── direct_method_mqtt/
│       │       ├── __init__.py
│       │       └── client.py   # DirectMethodMqttClient class
│       └── README.md
└── .github/
    └── workflows/
        ├── ci.yml             # CI pipeline (build all packages)
        ├── release.yml        # Release automation (publish to package managers)
        └── pr-validation.yml  # Pull request validation

```

## Coding Standards

### General Principles
- Use consistent naming conventions across all languages
- Implement basic error handling and logging
- Follow language-specific best practices
- Document public APIs clearly
- Focus on clarity and maintainability over complexity

### Language-Specific Guidelines

#### Python
- Follow PEP 8 style guide
- Use type hints for all public methods
- Use `snake_case` for variables and functions
- Use docstrings in Google format

#### TypeScript/Node.js
- Follow TypeScript strict mode
- Use `camelCase` for variables and functions
- Use `PascalCase` for classes
- Include JSDoc comments for public APIs

#### C# .NET
- Follow Microsoft C# coding conventions
- Use `PascalCase` for public members
- Use `camelCase` for private members
- Include XML documentation comments

## CI/CD Requirements

### Continuous Integration
- Build all packages successfully
- Code quality checks (linting, formatting)
- Basic validation that packages can be installed

### Release Process
- Automated version bumping
- Generate release notes from commits
- Publish to package managers simultaneously
- Create GitHub releases with artifacts

## Documentation Standards

### README Files
Each package should include:
- Installation instructions
- Quick start guide
- API reference
- Usage examples
- Changelog link

### API Documentation
- Include parameter types and descriptions
- Provide usage examples
- Document basic error conditions
- Keep examples simple and clear

